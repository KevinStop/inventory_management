import{a as R}from"./chunk-ZKTQV7EG.js";import{f as D,g as N}from"./chunk-7AUJDYC3.js";import{a as j}from"./chunk-MHTYV42J.js";import"./chunk-NKQOLO4R.js";import{a as z}from"./chunk-X5OPW46L.js";import{b as I,e as L,f as W,g as F,h as P,i as T,r as q,u as A}from"./chunk-SGIGSFT7.js";import"./chunk-LQDACG22.js";import{j as k,r as M}from"./chunk-GMFH3NDN.js";import{Gb as n,Ib as c,Kb as f,Lb as b,Mb as h,Ob as _,Pa as l,Qa as y,_ as E,bb as m,db as u,hb as p,mb as a,nb as r,ob as S,vb as C,wb as g}from"./chunk-ETUY2JGY.js";function Z(s,t){if(s&1&&(a(0,"p",26),n(1),r()),s&2){let o=g();l(),c(" ",o.formErrors.name," ")}}function U(s,t){if(s&1&&(a(0,"p",26),n(1),r()),s&2){let o=g();l(),c(" ",o.formErrors.lastName," ")}}function V(s,t){if(s&1&&(a(0,"p",26),n(1),r()),s&2){let o=g();l(),c(" ",o.formErrors.email," ")}}function O(s,t){if(s&1&&(a(0,"p",26),n(1),r()),s&2){let o=g();l(),c(" ",o.formErrors.password," ")}}var v=class s{constructor(t,o,e){this.userService=t;this.router=o;this.sweetalertService=e}userData={email:"",password:"",name:"",lastName:""};formErrors={email:"",password:"",name:"",lastName:""};showErrors=!1;ngOnInit(){z()}validateForm(){let t=!0;this.formErrors={email:"",password:"",name:"",lastName:""};let o=this.userData.name.trim();o||(this.formErrors.name="El nombre es requerido",t=!1);let e=this.userData.lastName.trim();e||(this.formErrors.lastName="El apellido es requerido",t=!1);let d=this.userData.email.trim(),i=/^[a-zA-Z][a-zA-Z]?[a-zA-Z0-9]*@espe\.edu\.ec$/,B=/\.{2,}/.test(d);if(!d)this.formErrors.email="El correo electr\xF3nico es requerido",t=!1;else if(B)this.formErrors.email="El correo no puede contener puntos consecutivos",t=!1;else if(!i.test(d))this.formErrors.email="Ingrese un correo institucional v\xE1lido (@espe.edu.ec)",t=!1;else{let x=o.charAt(0).toLowerCase(),w=d.split("@")[0];w.startsWith(x)?w.length>1&&!/^[a-zA-Z]$/.test(w[1])?(this.formErrors.email="La segunda letra del correo debe ser una letra.",t=!1):new RegExp(`^${x}[a-zA-Z]?${e.toLowerCase()}[0-9]*$`).test(w)||(this.formErrors.email=`El correo debe iniciar con "${x}[cualquier letra]${e.toLowerCase()}" seguido de n\xFAmeros opcionales.`,t=!1):(this.formErrors.email=`El correo debe iniciar con "${x}[segundo nombre]${e.toLowerCase()}"`,t=!1)}return this.userData.password?this.userData.password.length<6&&(this.formErrors.password="La contrase\xF1a debe tener al menos 6 caracteres",t=!1):(this.formErrors.password="La contrase\xF1a es requerida",t=!1),t}onSubmit(){if(this.showErrors=!0,!this.validateForm()){this.sweetalertService.error("Por favor, complete todos los campos correctamente.");return}let t={email:this.userData.email,password:this.userData.password,name:this.userData.name,lastName:this.userData.lastName};this.userService.register(t).subscribe({next:o=>{this.sweetalertService.success("Registro exitoso. Por favor, inicia sesi\xF3n."),this.router.navigate(["/login"])},error:o=>{let e=o.error?.message||"Hubo un problema al registrar el usuario. Por favor, intenta nuevamente.";this.sweetalertService.error(e)}})}static \u0275fac=function(o){return new(o||s)(y(R),y(D),y(j))};static \u0275cmp=E({type:s,selectors:[["app-register"]],standalone:!0,features:[_],decls:46,vars:16,consts:[[1,"bg-gray-50","dark:bg-gray-900","min-h-screen","relative"],[1,"flex","items-center","justify-center","min-h-screen","p-4","sm:p-6","lg:p-8"],[1,"w-full","max-w-6xl","bg-white","dark:bg-gray-800","rounded-2xl","shadow-xl","overflow-hidden","flex","flex-col","md:flex-row"],[1,"w-full","md:w-1/2","p-8","lg:p-12"],[1,"space-y-8"],[1,"text-3xl","font-bold","text-gray-900","dark:text-white"],[1,"space-y-6",3,"ngSubmit"],[1,"grid","grid-cols-2","gap-4"],["for","name",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300","mb-2"],["type","text","name","name","id","name","placeholder","Nombre","required","",2,"text-transform","uppercase",3,"ngModelChange","ngModel"],["class","mt-1 text-sm text-red-500 dark:text-red-400",4,"ngIf"],["for","lastname",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300","mb-2"],["type","text","name","lastname","id","lastname","placeholder","Apellido","required","",2,"text-transform","uppercase",3,"ngModelChange","ngModel"],["for","email",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300","mb-2"],["type","email","name","email","id","email","placeholder","correo@espe.edu.ec","required","",3,"ngModelChange","ngModel"],["for","password",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300","mb-2"],["type","password","name","password","id","password","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022","required","",3,"ngModelChange","ngModel"],["type","submit",1,"w-full","px-4","py-3","text-sm","font-semibold","text-white","bg-blue-600","rounded-lg","hover:bg-blue-700","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:ring-offset-2","dark:bg-blue-500","dark:hover:bg-blue-600","transition","duration-150"],[1,"text-center","mt-4"],[1,"text-sm","text-gray-600","dark:text-gray-400"],["routerLink","/login",1,"font-medium","text-blue-600","hover:text-blue-500","dark:text-blue-400","hover:underline"],[1,"hidden","md:block","md:w-1/2","bg-cover","bg-center","relative","overflow-hidden"],[1,"absolute","inset-0","bg-gradient-to-br","from-blue-600/80","to-purple-600/80","mix-blend-multiply"],["src","universidad.png","alt","Campus Universitario",1,"w-full","h-full","object-cover"],[1,"absolute","inset-0","flex","flex-col","items-center","justify-center","text-white","p-12","text-center"],[1,"text-2xl","font-bold","mb-4"],[1,"mt-1","text-sm","text-red-500","dark:text-red-400"]],template:function(o,e){o&1&&(a(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div")(6,"h2",5),n(7," Crear cuenta "),r()(),a(8,"form",6),C("ngSubmit",function(){return e.onSubmit()}),a(9,"div",7)(10,"div")(11,"label",8),n(12," Nombre "),r(),a(13,"input",9),h("ngModelChange",function(i){return b(e.userData.name,i)||(e.userData.name=i),i}),r(),n(14,"> "),m(15,Z,2,1,"p",10),r(),a(16,"div")(17,"label",11),n(18," Apellido "),r(),a(19,"input",12),h("ngModelChange",function(i){return b(e.userData.lastName,i)||(e.userData.lastName=i),i}),r(),n(20,"> "),m(21,U,2,1,"p",10),r()(),a(22,"div")(23,"label",13),n(24," Correo Institucional "),r(),a(25,"input",14),h("ngModelChange",function(i){return b(e.userData.email,i)||(e.userData.email=i),i}),r(),m(26,V,2,1,"p",10),r(),a(27,"div")(28,"div")(29,"label",15),n(30," Contrase\xF1a "),r(),a(31,"input",16),h("ngModelChange",function(i){return b(e.userData.password,i)||(e.userData.password=i),i}),r(),m(32,O,2,1,"p",10),r()(),a(33,"button",17),n(34," Crear cuenta "),r(),a(35,"div",18)(36,"p",19),n(37," \xBFYa tienes una cuenta? "),a(38,"a",20),n(39," Iniciar sesi\xF3n "),r()()()()()(),a(40,"div",21),S(41,"div",22)(42,"img",23),a(43,"div",24)(44,"h3",25),n(45,"Sistema de Gesti\xF3n de Inventarios y reserva de laboratorios"),r()()()()()()),o&2&&(l(13),p("block w-full px-4 py-3 rounded-lg border "+(e.showErrors&&e.formErrors.name?"border-red-500 dark:border-red-400":"border-gray-300 dark:border-gray-600")+" focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-400 transition duration-150"),f("ngModel",e.userData.name),l(2),u("ngIf",e.showErrors&&e.formErrors.name),l(4),p("block w-full px-4 py-3 rounded-lg border "+(e.showErrors&&e.formErrors.lastName?"border-red-500 dark:border-red-400":"border-gray-300 dark:border-gray-600")+" focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-400 transition duration-150"),f("ngModel",e.userData.lastName),l(2),u("ngIf",e.showErrors&&e.formErrors.lastName),l(4),p("block w-full px-4 py-3 rounded-lg border "+(e.showErrors&&e.formErrors.email?"border-red-500 dark:border-red-400":"border-gray-300 dark:border-gray-600")+" focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-400 transition duration-150"),f("ngModel",e.userData.email),l(),u("ngIf",e.showErrors&&e.formErrors.email),l(5),p("block w-full px-4 py-3 rounded-lg border "+(e.showErrors&&e.formErrors.password?"border-red-500 dark:border-red-400":"border-gray-300 dark:border-gray-600")+" focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-400 transition duration-150"),f("ngModel",e.userData.password),l(),u("ngIf",e.showErrors&&e.formErrors.email))},dependencies:[M,k,A,T,I,L,W,q,P,F,N],encapsulation:2})};export{v as default};
